<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <title>Список пользователей</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body th:replace="~{layout :: bodyContent}">

<div th:fragment="content">
    <h2>Список пользователей</h2>

    <form method="get" th:action="@{/user}">
        <label for="size">Строк на странице:</label>
        <select name="size" id="size" class="custom-select" onchange="this.form.submit()">
            <option th:each="i : ${#numbers.sequence(5, 50, 5)}"
                    th:value="${i}"
                    th:text="${i}"
                    th:selected="${i == size}">5</option>
            <option th:if="${size > 50}" th:value="${size}" th:text="'Произвольно: ' + ${size}" selected></option>
        </select>
    </form>

    <div class="datagrid">
        <table>
            <thead>
            <tr>
                <th>Логин</th>
                <th>Имя пользователя</th>
                <th>Язык</th>
                <th>Роли</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="user : ${users}">
                <td th:text="${user.login}">login</td>
                <td th:text="${user.username}">username</td>
                <td th:text="${user.lang}">RU</td>
                <td>
                    <span th:each="role : ${user.roles}"
                          th:text="${role.name}"
                          th:append=", "
                          th:remove="tag"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="pagination">
        <ul>
            <li th:classappend="${currentPage == 0} ? 'disabled'">
                <a th:href="@{/user(size=${size}, page=${currentPage - 1})}">&laquo;</a>
            </li>

            <li th:each="pageNum : ${#numbers.sequence(0, totalPages - 1)}"
                th:classappend="${pageNum == currentPage} ? 'active'">
                <a th:href="@{/user(size=${size}, page=${pageNum})}"
                   th:text="${pageNum + 1}">1</a>
            </li>

            <li th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
                <a th:href="@{/user(size=${size}, page=${currentPage + 1})}">&raquo;</a>
            </li>
        </ul>
    </div>
</div>

</body>
</html>
